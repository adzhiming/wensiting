(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71997192"],{"1eac":function(t,e,a){"use strict";var s=a("7939"),r=a.n(s);r.a},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},"3f46":function(t,e,a){},"405e":function(t,e,a){"use strict";var s=a("5d16"),r=a.n(s);r.a},"55dd":function(t,e,a){"use strict";var s=a("5ca1"),r=a("d8e8"),n=a("4bf8"),o=a("79e5"),i=[].sort,c=[1,2,3];s(s.P+s.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!a("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(n(this)):i.call(n(this),r(t))}})},5608:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"time"},[t._v("\n  "+t._s(t.tipText)),!0===t.isDay?a("span",{staticClass:"styleAll"},[t._v(t._s(t.day))]):t._e(),a("span",{staticClass:"timeTxt"},[t._v(t._s(t.dayText))]),a("span",{staticClass:"styleAll"},[t._v(t._s(t.hour))]),a("span",{staticClass:"timeTxt"},[t._v(t._s(t.hourText))]),a("span",{staticClass:"styleAll"},[t._v(t._s(t.minute))]),a("span",{staticClass:"timeTxt"},[t._v(t._s(t.minuteText))]),a("span",{staticClass:"styleAll"},[t._v(t._s(t.second))]),a("span",{staticClass:"timeTxt"},[t._v(t._s(t.secondText))])])},r=[],n=(a("c5f6"),{name:"CountDown",props:{tipText:{type:String,default:"倒计时"},dayText:{type:String,default:"天"},hourText:{type:String,default:"时"},minuteText:{type:String,default:"分"},secondText:{type:String,default:"秒"},datatime:{type:Number,default:0},isDay:{type:Boolean,default:!0}},data:function(){return{day:"00",hour:"00",minute:"00",second:"00"}},created:function(){this.show_time()},mounted:function(){},methods:{show_time:function(){var t=this;function e(){var e=t.datatime-Date.parse(new Date)/1e3,a=0,s=0,r=0,n=0;e>0?(a=!0===t.isDay?Math.floor(e/86400):0,s=Math.floor(e/3600)-24*a,r=Math.floor(e/60)-24*a*60-60*s,n=Math.floor(e)-24*a*60*60-60*s*60-60*r,s<=9&&(s="0"+s),r<=9&&(r="0"+r),n<=9&&(n="0"+n),t.day=a,t.hour=s,t.minute=r,t.second=n):(t.day="00",t.hour="00",t.minute="00",t.second="00")}e(),setInterval(e,1e3)}}}),o=n,i=a("2877"),c=Object(i["a"])(o,s,r,!1,null,null,null);e["a"]=c.exports},"5d16":function(t,e,a){},"68f1":function(t,e,a){"use strict";var s=a("3f46"),r=a.n(s);r.a},7939:function(t,e,a){},adbf:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.domStatus,expression:"domStatus"}],class:[t.posterImageStatus?"noscroll product-con":"product-con"]},[a("ProductConSwiper",{attrs:{imgUrls:t.imgUrls}}),a("div",{staticClass:"nav acea-row row-between-wrapper"},[a("div",{staticClass:"money"},[t._v("\n      ￥"),a("span",{staticClass:"num",domProps:{textContent:t._s(t.storeInfo.price)}}),a("span",{staticClass:"y-money",domProps:{textContent:t._s("￥"+t.storeInfo.ot_price)}})]),a("div",{staticClass:"acea-row row-middle"},[a("div",{staticClass:"times"},[a("div",[t._v("距秒杀结束仅剩")]),a("CountDown",{attrs:{"is-day":!1,"tip-text":"","day-text":"","hour-text":" : ","minute-text":" : ","second-text":"",datatime:t.datatime}})],1),a("div",{staticClass:"iconfont icon-jiantou"})])]),a("div",{staticClass:"wrapperRush"},[a("div",{staticClass:"introduce acea-row row-between"},[a("div",{staticClass:"infor",domProps:{textContent:t._s(t.storeInfo.title)}}),a("div",{staticClass:"iconfont icon-fenxiang",on:{click:t.setPosterImageStatus}})]),a("div",{staticClass:"label acea-row row-middle"},[a("div",{staticClass:"stock",domProps:{textContent:t._s("库存:"+t.storeInfo.stock+"件")}}),a("div",{domProps:{textContent:t._s("销量:"+t.storeInfo.sales+"件")}})])]),a("div",{staticClass:"product-intro"},[a("div",{staticClass:"title"},[t._v("产品介绍")]),a("div",{staticClass:"conter",domProps:{innerHTML:t._s(t.storeInfo.description)}})]),a("div",{staticStyle:{height:"1.2rem"}}),a("div",{staticClass:"footerRush acea-row row-between-wrapper"},[a("div",{staticClass:"customerSer acea-row row-center-wrapper row-column",on:{click:function(e){return t.$router.push({path:"/customer/list"})}}},[a("div",{staticClass:"iconfont icon-kefu"}),a("div",[t._v("客服")])]),a("div",{staticClass:"bnt bg-color-red",on:{click:t.tapBuy}},[t._v("立即购买")])]),a("ProductWindow",{attrs:{attr:t.attr},on:{changeFun:t.changeFun}}),a("StorePoster",{attrs:{posterImageStatus:t.posterImageStatus,posterData:t.posterData},on:{setPosterImageStatus:t.setPosterImageStatus}})],1)},r=[],n=a("7618"),o=(a("7f7f"),a("c5f8")),i=a("5608"),c=a("c6da"),u=a("cbd6"),l=a("ca41"),d=a("73f5"),p=a("e876"),m=a("ed08"),f=a("74f9"),v="SeckillDetails",h={name:"SeckillDetails",components:{ProductConSwiper:o["a"],CountDown:i["a"],ProductWindow:c["a"],StorePoster:u["a"]},props:{},data:function(){return{domStatus:!1,posterData:{image:"",title:"",price:"",code:""},posterImageStatus:!1,action:"",imgUrls:[],storeInfo:[],replyCount:0,reply:[],cartNum:1,attr:{cartAttr:!1,productSelect:{image:"",store_name:"",price:"",stock:"",unique:"",cart_num:1}},datatime:0}},watch:{$route:function(t){var e=this;console.log(t),t.name===v&&e.mountedStart()}},mounted:function(){this.mountedStart()},methods:{mountedStart:function(){var t=this,e=t.$route.params.id;t.datatime=parseInt(t.$route.params.time),Object(l["b"])(e).then(function(e){t.$set(t,"storeInfo",e.data.storeInfo),t.$set(t,"imgUrls",e.data.storeInfo.images),t.$set(t,"replyCount",e.data.replyCount),t.$set(t,"reply",e.data.reply),t.posterData.image=t.storeInfo.image_base,t.updateTitle(),t.storeInfo.title.length>30?t.posterData.title=t.storeInfo.title.substring(0,30)+"...":t.posterData.title=t.storeInfo.title,t.posterData.price=t.storeInfo.price,t.posterData.code=t.storeInfo.code_base,t.setProductSelect(),t.domStatus=!0,t.getImageBase64(),t.setShare()})},setShare:function(){Object(m["d"])()&&Object(f["openShareAll"])({desc:this.storeInfo.info,title:this.storeInfo.title,link:location.href,imgUrl:this.storeInfo.image})},getImageBase64:function(){var t=this;Object(p["j"])(this.posterData.image,t.posterData.code).then(function(e){t.posterData.image=e.data.image,t.posterData.code=e.data.code})},updateTitle:function(){document.title=this.storeInfo.title||this.$route.meta.title},setPosterImageStatus:function(){var t=document.body||document.documentElement;t.scrollTop=0,this.posterImageStatus=!this.posterImageStatus},changeFun:function(t){"object"!==Object(n["a"])(t)&&(t={});var e=t.action||"",a=void 0===t.value?"":t.value;this[e]&&this[e](a)},changeattr:function(t){var e=this;e.attr.cartAttr=t},ChangeCartNum:function(t){var e=this;t?e.attr.productSelect.cart_num<e.storeInfo.stock&&e.attr.productSelect.cart_num++:e.attr.productSelect.cart_num>1&&e.attr.productSelect.cart_num--},setProductSelect:function(){var t=this,e=t.attr;e.productSelect.image=t.storeInfo.image,e.productSelect.store_name=t.storeInfo.title,e.productSelect.price=t.storeInfo.price,e.productSelect.stock=t.storeInfo.stock,e.cartAttr=!1,t.$set(t,"attr",e)},selecAttrTap:function(){this.cartAttr=!0},tapBuy:function(){var t=this,e=this;if(0==e.attr.cartAttr)e.attr.cartAttr=!this.attr.attrcartAttr;else{var a={};a.productId=e.storeInfo.product_id,a.cartNum=e.attr.productSelect.cart_num,a.uniqueId=e.attr.productSelect.unique,a.secKillId=e.storeInfo.id,a.new=1,Object(d["o"])(a).then(function(t){e.$router.push({path:"/order/submit/"+t.data.cartId})}).catch(function(e){t.$dialog.error(e.msg)})}}}},g=h,C=(a("1eac"),a("405e"),a("2877")),_=Object(C["a"])(g,s,r,!1,null,"f4f096a6",null);e["default"]=_.exports},c5f8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slider-banner product-bg"},[t.imgUrls.length>0?a("swiper",{staticClass:"swiper-wrapper",attrs:{options:t.ProductConSwiper}},t._l(t.imgUrls,function(t){return a("swiperSlide",{key:t,ref:"goodSwiper",refInFor:!0,staticClass:"swiper-slide"},[a("img",{staticClass:"slide-image",attrs:{src:t}})])}),1):t._e(),a("div",{staticClass:"pages"},[t._v(t._s(t.currents||1)+"/"+t._s(t.imgUrls.length||1))])],1)},r=[],n=a("7212"),o=(a("e5d0"),{name:"ProductConSwiper",components:{swiper:n["swiper"],swiperSlide:n["swiperSlide"]},props:{imgUrls:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{currents:1,ProductConSwiper:{autoplay:{disableOnInteraction:!1,delay:2e3},loop:!0,speed:1e3,observer:!0,observeParents:!0,on:{slideChangeTransitionStart:function(){t.currents=this.realIndex+1}}}}},mounted:function(){},methods:{}}),i=o,c=a("2877"),u=Object(c["a"])(i,s,r,!1,null,null,null);e["a"]=u.exports},c6da:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"product-window",class:!0===t.attr.cartAttr?"on":""},[a("div",{staticClass:"textpic acea-row row-between-wrapper"},[a("div",{staticClass:"pictrue"},[a("img",{staticClass:"image",attrs:{src:t.attr.productSelect.image}})]),a("div",{staticClass:"text"},[a("div",{staticClass:"line1"},[t._v("\n          "+t._s(t.attr.productSelect.store_name)+"\n        ")]),a("div",{staticClass:"money font-color-red"},[t._v("\n          ￥"),a("span",{staticClass:"num"},[t._v(t._s(t.attr.productSelect.price))]),a("span",{staticClass:"stock"},[t._v("库存: "+t._s(t.attr.productSelect.stock))])])]),a("div",{staticClass:"iconfont icon-guanbi",on:{click:t.closeAttr}})]),a("div",{staticClass:"productWinList"},t._l(t.attr.productAttr,function(e,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"title"},[t._v(t._s(e.attr_name))]),a("div",{staticClass:"listn acea-row row-middle"},t._l(e.attr_value,function(r,n){return a("div",{key:n,staticClass:"itemn",class:e.index===n?"on":"",on:{click:function(e){return t.tapAttr(s,n)}}},[t._v("\n            "+t._s(r.attr)+"\n          ")])}),0)])}),0),a("div",{staticClass:"cart"},[a("div",{staticClass:"title"},[t._v("数量")]),a("div",{staticClass:"carnum acea-row row-left"},[a("div",{staticClass:"item reduce",class:t.attr.productSelect.cart_num<=1?"on":"",on:{click:t.CartNumDes}},[t._v("\n          -\n        ")]),a("div",{staticClass:"item num"},[t._v(t._s(t.attr.productSelect.cart_num))]),a("div",{staticClass:"item plus",class:t.attr.productSelect.cart_num>=t.attr.productSelect.stock?"on":"",on:{click:t.CartNumAdd}},[t._v("\n          +\n        ")])])])]),a("div",{staticClass:"mask",attrs:{hidden:!1===t.attr.cartAttr},on:{touchmove:function(t){t.preventDefault()},click:t.closeAttr}})])},r=[],n=(a("55dd"),{name:"ProductWindow",props:{attr:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){},methods:{closeAttr:function(){this.$emit("changeFun",{action:"changeattr",value:!1})},CartNumDes:function(){this.$emit("changeFun",{action:"ChangeCartNum",value:!1})},CartNumAdd:function(){this.$emit("changeFun",{action:"ChangeCartNum",value:1})},tapAttr:function(t,e){var a=this;a.attr.productAttr[t].index=e;var s=a.getCheckedValue().sort().join(",");a.$emit("changeFun",{action:"ChangeAttr",value:s})},getCheckedValue:function(){for(var t=this.attr.productAttr,e=[],a=0;a<t.length;a++)for(var s=0;s<t[a].attr_values.length;s++)t[a].index===s&&e.push(t[a].attr_values[s]);return e}}}),o=n,i=a("2877"),c=Object(i["a"])(o,s,r,!1,null,null,null);e["a"]=c.exports},ca41:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"c",function(){return n}),a.d(e,"b",function(){return o});var s=a("b775");function r(){return s["a"].get("/seckill/index",{},{login:!1})}function n(t,e){return s["a"].get("/seckill/list/"+t,e,{login:!1})}function o(t){return s["a"].get("/seckill/detail/"+t,{},{login:!1})}},cbd6:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.posterImageStatus?s("div",{staticClass:"poster-first"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.canvasStatus,expression:"!canvasStatus"}],staticClass:"poster-pop"},[s("img",{staticClass:"close",attrs:{src:a("acb3")},on:{click:t.posterImageClose}}),s("div",{ref:"poster",staticClass:"canvas"},[s("img",{staticClass:"image",attrs:{src:t.posterData.image,alt:"商品图片"}}),s("div",{staticClass:"text black"},[s("span",{domProps:{textContent:t._s(t.posterData.title)}})]),s("div",{staticClass:"text rad"},[s("span",{domProps:{textContent:t._s("￥"+t.posterData.price)}})]),s("div",{staticClass:"code"},[s("div",{staticClass:"code-img"},[s("img",{attrs:{src:t.posterData.code,alt:"二维码"}})]),t._m(0)])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.canvasStatus,expression:"canvasStatus"}],staticClass:"poster-pop"},[s("img",{staticClass:"close",attrs:{src:a("acb3")},on:{click:t.posterImageClose}}),s("img",{staticClass:"poster-image",attrs:{src:t.posterImage,alt:"tp"}}),s("div",{staticClass:"keep"},[t._v("长按图片可以保存到手机")])]),s("div",{staticClass:"mask"})]):t._e()},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"code-text"},[a("span",[t._v("长按识别二维码 立即购买")])])}],n=a("c0e9"),o=a.n(n),i={name:"StorePoster",props:{posterImageStatus:Boolean,posterData:Object},data:function(){return{canvasStatus:!1}},watch:{posterImageStatus:function(){var t=this;!0===t.posterImageStatus&&t.$nextTick(function(){t.savePosterPath()})}},mounted:function(){},methods:{posterImageClose:function(){this.posterImageStatus=!1,this.canvasStatus=!1,this.$emit("setPosterImageStatus")},savePosterPath:function(){this.$dialog.loading.open(),this.setHtml2Canvas()},setHtml2Canvas:function(){var t=this,e=document.createElement("canvas"),a=t.$refs.poster,s=parseInt(window.getComputedStyle(a).width),r=parseInt(window.getComputedStyle(a).height);e.width=2*s,e.height=2*r,e.style.width=s+"px",e.style.height=r+"px";var n=e.getContext("2d");n.scale(2,2);var i={backgroundColor:null,canvas:e,useCORS:!0};o()(a,i).then(function(e){t.posterImage=e.toDataURL(),t.canvasStatus=!0,t.$dialog.loading.close()})}}},c=i,u=(a("68f1"),a("2877")),l=Object(u["a"])(c,s,r,!1,null,"42949b47",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-71997192.84aa0cc3.js.map