(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b88728f"],{"34a6":function(t,e,a){},6871:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkNTA0M2QyNC02ZDBmLTkwNGItYjY1Ni02OGM0MTIzOWMzZDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDU2OUE5RjFCRjBFMTFFOUFDNzRBNUUwNDlEMzk1RTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDU2OUE5RjBCRjBFMTFFOUFDNzRBNUUwNDlEMzk1RTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGRkYmQ0NDMtMjEwZS00ZjVjLWE0MDgtMDYxM2VkMDBkMDE1IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YWIyMDM4YzctNTBiNi0xNzRiLTg3NGEtNjkyZDA5MzI1MWRmIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bMGCmQAAA5NJREFUeNq0l0tME1EUhs8wDATFAiJEIhZBMSZqkFeiCeKrwEZjwAUlMbCRRCBRSYyy8AELQ9wIESRskKVhAZGEjYiCBNTwBsFHUEgBkUcLrUCFPrjeMw4IdDotUzjJaTtzzz1f79zH/IchhIAjm4o5xNGvJOoJ1GOph1H3FZr11Ieot1N/Tf1VYMd3s6OcjBSYAjH5LWCYbC4yJsAz7hxwEdHA7g8BZpcPH0PmDGAd1YC5txOWWhrB3N2hBUKe0aZi+gf0dpMjWMwnow+qJ2PDJwz5d4hFM0ScNYtmmBgK7hLsizns5RcDstTLtMkXiKm/h8g17Ku9dIZgLswpCRag1bM5GWR5YZ64atYZHZm5pkZ49Ub4RnDJTKaaLJtMZKsMc81ev4rwUlEwbUjFR4P/cqsNn542WYXw1HVgesOXLoZJV+bUop0i2qeFZKaihFiNC6JzjgxkrQXn40qUa+bxMfLj9BHyVenB+/iNDNE4Q0EejjofmQz94UH36Zh/TUMA7k85NpqaAMaPzavXHmHhENrYbxOH+12Xopqmow12o9eJXGSsLKjl108wvKiAvU8qgAsJW73vrbooGo8MZCGTB3vGnZUFHUlVwUReNszVVoGyqoGHKy6rISDvkd1+AivJnX5EcccjZUHNmiH+evrxPX6thNS2AKugpyzL2u3LHeNZUQg+zIaEyoaumOnbALA+fgBubpL92QM8KxyjfBhvhUtQfLxBRc8dQvm30r+Xi4+bqyNdhUo8XjFDsIHM/3YYOJ6VtiVQfI0iE8GDVs2wZLBVNw1/etq2ZKQCaxDBneZP3ZLBCy1v8IhzGYomsLoQXL/U0iQZbGxtAq+ok7An9z4oXzZDUHGlLCiawKpfOTLH6ZHpL3Z6GT+8A6t2ChgPT6eTM147YGe8SvLIdKe6yES1VelCZflDxYNCW91VcBuWvvRtalTcPiWEvR+0nbLKcpyyMmS6C/eKF+uqs7yuqAO5oxHrF1FyGlhOxW8KzPrutp3bz32wWFczjax1Ym/bhUBKAlkr/jZKn9JtkT5Z6TbSZ+PJddPc1V5jyM0EYjSCq7asnwV9djqY2lprMLekrv4vb1XENNArX97Svk7LWxFBP4mSCEX65gR93oq+sivonSlhcuk+z6EljL9n3HngTtASJli5voQZGwFzD5Ywb7GE0QklTJFUCcNssmhLXFO0+QnNs2uKtnp03KeOcv4VYABwkIZ9IZVk0gAAAABJRU5ErkJggg=="},a740:function(t,e,a){"use strict";var i=a("34a6"),s=a.n(i);s.a},d6f1:function(t,e,a){t.exports=a.p+"h5/img/pay-code-demo.44f5a563.png"},deca:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"personal-data"},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"title"},[t._v("管理我的账号")]),i("div",{staticClass:"wrapList"},t._l(t.switchUserInfo,function(e,s){return i("div",{key:s,staticClass:"item acea-row row-between-wrapper",class:e.uid===t.userInfo.uid?"on":""},[i("div",{staticClass:"picTxt acea-row row-between-wrapper"},[i("div",{staticClass:"pictrue"},[e.uid===t.userInfo.uid?i("VueCoreImageUpload",{ref:"upImg",refInFor:!0,staticClass:"btn btn-primary",attrs:{crop:!1,compress:"80",headers:t.headers,"max-file-size":5242880,credentials:!1,inputAccept:"image/*",inputOfFile:"file",url:t.url},on:{imageuploaded:t.imageuploaded}},[i("div",{staticClass:"pictrue"},[i("img",{attrs:{src:e.avatar}})])]):i("div",{staticClass:"pictrue"},[i("img",{attrs:{src:e.avatar}})]),e.uid===t.userInfo.uid?i("img",{staticClass:"alter",attrs:{src:a("6871")}}):t._e()],1),i("div",{staticClass:"text"},[i("div",{staticClass:"name line1"},[t._v(t._s(e.nickname))]),i("div",{staticClass:"phone"},[t._v("绑定手机号："+t._s(e.phone))])])]),e.uid===t.userInfo.uid?i("div",{staticClass:"currentBnt acea-row row-center-wrapper font-color-red"},[t._v("\n            当前账号\n          ")]):i("div",{staticClass:"bnt font-color-red acea-row row-center-wrapper",on:{click:function(e){return t.switchAccounts(s)}}},[t._v("\n            使用账号\n          ")])])}),0)]),i("div",{staticClass:"list"},[i("div",{staticClass:"item acea-row row-between-wrapper"},[i("div",[t._v("昵称")]),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.nickname,expression:"userInfo.nickname"}],attrs:{type:"text"},domProps:{value:t.userInfo.nickname},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"nickname",e.target.value)}}})])]),i("div",{staticClass:"item acea-row row-between-wrapper"},[i("div",[t._v("ID号")]),i("div",{staticClass:"input acea-row row-between-wrapper"},[i("input",{staticClass:"id",attrs:{type:"text",disabled:""},domProps:{value:t.userInfo.uid}}),i("span",{staticClass:"iconfont icon-suozi"})])]),t.userInfo.phone?t.userInfo.phone?i("div",{staticClass:"item acea-row row-between-wrapper"},[i("div",[t._v("手机号码")]),i("div",{staticClass:"input acea-row row-between-wrapper"},[i("div",{staticClass:"input acea-row row-between-wrapper"},[i("input",{staticClass:"id",attrs:{type:"text",disabled:""},domProps:{value:t.userInfo.phone}}),i("span",{staticClass:"iconfont icon-suozi"})])])]):t._e():i("div",[i("router-link",{staticClass:"item acea-row row-between-wrapper",attrs:{to:"/user/binding"}},[i("div",[t._v("绑定手机号")]),i("div",{staticClass:"input"},[t._v("\n            点击绑定手机号"),i("span",{staticClass:"iconfont icon-xiangyou"})])])],1),t.userInfo.phone&&"h5"===t.userInfo.user_type?i("div",[i("router-link",{staticClass:"item acea-row row-between-wrapper",attrs:{to:"/change_password"}},[i("div",[t._v("密码")]),i("div",{staticClass:"input"},[t._v("\n            点击修改密码"),i("span",{staticClass:"iconfont icon-xiangyou"})])])],1):t._e(),i("div",{staticClass:"item acea-row row-between-wrapper"},[i("div",[t._v("收款码")]),i("VueCoreImageUpload",{ref:"upImg",staticClass:"btn btn-primary",attrs:{crop:!1,compress:"80",headers:t.headers,"max-file-size":5242880,credentials:!1,inputAccept:"image/*",inputOfFile:"file",url:t.url},on:{imageuploaded:t.imageuploaded_pay_code}},[i("div",{staticClass:"pictrue-pay-code"},[i("img",{attrs:{src:t.userInfo.h5_pay_code?t.userInfo.h5_pay_code:a("d6f1")}})]),t.userInfo.h5_pay_code===t.userInfo.h5_pay_code?i("img",{staticClass:"edit-icon",attrs:{src:a("6871")}}):t._e()])],1)]),i("div",{staticClass:"modifyBnt bg-color-red",on:{click:t.submit}},[t._v("保存修改")]),t.isWeixin?t._e():i("div",{staticClass:"logOut cart-color acea-row row-center-wrapper",on:{click:t.logout}},[t._v("\n      退出登录\n    ")])])},s=[],o=(a("7f7f"),a("2f62")),n=a("ed08"),r=a("f603"),c=a("c24f"),d=a("74f9"),u=a("d0a4"),l=a("4360"),p=a("5a0c"),h=a.n(p),w={name:"PersonalData",components:{VueCoreImageUpload:r["a"]},data:function(){return{url:"".concat(n["a"],"/upload/image"),headers:{"Authori-zation":"Bearer "+this.$store.state.app.token},avatar:"",isWeixin:!1,currentAccounts:0,switchUserInfo:[],userIndex:0}},watch:{$route:function(t){"PersonalData"===t.name&&this.$store.dispatch("USERINFO",!0)}},computed:Object(o["b"])(["userInfo"]),mounted:function(){this.avatar=this.userInfo.avatar,this.isWeixin=Object(n["d"])(),this.getUserInfo()},methods:{switchAccounts:function(t){var e=this;this.userIndex=t;var a=this.switchUserInfo[this.userIndex];return this.switchUserInfo.length<=1||(void 0===a?this.$dialog.toast({mes:"切换的账号不存在"}):void("h5"===a.user_type?Object(c["V"])().then(function(t){var a=t.data;e.$dialog.loading.close();var i=h()(a.expires_time);l["a"].commit("LOGIN",a.token,i),e.$emit("changeswitch",!1),location.reload()}).catch(function(t){return e.$dialog.loading.close(),e.$dialog.toast({mes:t})}):(u["a"].set("loginType","wechat",60),this.$dialog.loading.close(),this.$store.commit("LOGOUT"),Object(d["clearAuthStatus"])(),this.$emit("changeswitch",!1),location.reload())))},getUserInfo:function(){var t=this,e=this;Object(c["D"])().then(function(a){for(var i=a.data.switchUserInfo,s=0;s<i.length;s++)i[s].uid==e.userInfo.uid&&(e.userIndex=s),e.isWeixin||"h5"==i[s].user_type||""!==i[s].phone||i.splice(s,1);e.$set(t,"switchUserInfo",i)})},imageuploaded:function(t){if(200!==t.status)return this.$dialog.error(t.msg||"上传图片失败");void 0!==this.switchUserInfo[this.userIndex]&&this.$set(this.switchUserInfo[this.userIndex],"avatar",t.data.url)},imageuploaded_pay_code:function(t){t={status:200,msg:200,data:{}};if(t.data.url="http://wst.com/uploads/attach/2020/05/20200502/849a983f81e8d907e7a51f67c68275f3.png",200!==t.status)return this.$dialog.error(t.msg||"上传图片失败");this.$set(this.switchUserInfo[this.userIndex],"h5_pay_code",t.data.url),this.$set(this.userInfo,"h5_pay_code",t.data.url)},submit:function(){var t=this,e=this.switchUserInfo[this.userIndex];Object(c["O"])({nickname:Object(n["f"])(this.userInfo.nickname),avatar:e.avatar,h5_pay_code:e.h5_pay_code}).then(function(e){t.$store.dispatch("USERINFO",!0),t.$dialog.success(e.msg),t.$router.go(-1)},function(e){t.$dialog.error(e.msg)})},logout:function(){var t=this;this.$dialog.confirm({mes:"确认退出登录?",opts:function(){Object(c["t"])().then(function(e){t.$store.commit("LOGOUT"),Object(d["clearAuthStatus"])(),location.href=location.origin,console.log(e)}).catch(function(t){console.log(t)})}})}}},m=w,v=(a("a740"),a("2877")),f=Object(v["a"])(m,i,s,!1,null,"a2bd813c",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-0b88728f.f65024c7.js.map